{"ts":1347103849474,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/* Author:\n\n */\n$(document).ready(function() {\n\tinit();\n\t$(\"#output-wrapper\").hide();\n\t$(\"#dyslexiarizeme\").click(function(event) {\n\t\tvar level = $(\"#level\").html();\n\t\tjumbledWords.clearCache();\n\t\tif(level === \"<b>Mild</b>\") {\n\t\t\tjumbledWords.severityFunction = mildMiddle;\n\t\t} else if(level === \"<b>Medium</b>\") {\n\t\t\tjumbledWords.severityFunction = mediumMiddle;\n\t\t} else {\n\t\t\tjumbledWords.severityFunction = severeMiddle;\n\t\t}\n\t\tvar input = $(\"#dyslexicInput\").val()\n\t\tvar output = getNewText(input);\n\t\t$(\"#dyslexiarized\").html(output);\n\t\tgoToByScroll(\"output-wrapper\");\n\n\t});\n\n\t$(function() {\n\t\t$(\"#slider\").slider({\n\t\t\tvalue : 1,\n\t\t\tmin : 1,\n\t\t\tmax : 3,\n\t\t\tstep : 1,\n\t\t\tslide : function(event, ui) {\n\t\t\t\tupdateLevel(ui.value);\n\t\t\t}\n\t\t});\n\t\tupdateLevel(1);\n\t});\n})\nfunction updateLevel(val) {\n\tvar level = \"\";\n\tif(val == 1) {\n\t\tlevel = \"Mild\";\n\t} else if(val == 2) {\n\t\tlevel = \"Medium\";\n\t} else {\n\t\tlevel = \"Severe\";\n\t}\n\t$(\"#level\").html(\"<b>\" + level + \"</b>\");\n}\n\nvar jumbledWords = {\n\tseverityFunction : mildMiddle,\n\tcache : {},\n\tadd : function(word, fn) {\n\t\tif(!this.cache[word]) {\n\t\t\tthis.cache[word] = fn(word, this.severityFunction);\n\t\t}\n\t\treturn this.cache[word];\n\t},\n\tclearCache : function() {\n\t\tthis.cache = {};\n\t}\n};\n\nfunction goToByScroll(id) {\n\t$(\"#\" + id).fadeIn(\"slow\");\n\t$(\"body\").animate({\n\t\tscrollTop : $(\"#\" + id).offset().top\n\t}, 500, function() {\n\t\t$(\"#\" + id).fadeIn('slow', function() {\n\n\t\t});\n\t})\n}\n\nfunction isVowel(s) {\n\treturn (/^[aeiou]$/i).test(s);\n}\n\nfunction severeMiddle(middleWord) {\n\tvar letters = middleWord.split(\"\");\n\treturn letters.sort(function() {\n\t\treturn 0.5 - Math.random()\n\t}).join(\"\");\n}\n\nfunction mediumMiddle(middleWord) {\n\tvar newMiddle = [];\n\tvar letterGroups = middleWord.match(/.{1,2}/g);\n\tfor(var i = 0; i < letterGroups.length; i++) {\n\t\tnewMiddle.push(severeMiddle(letterGroups[i]));\n\t}\n\treturn newMiddle.join(\"\");\n}\n\nfunction mildMiddle(middleWord) {\n\tvar letters = middleWord.split(\"\");\n\tvar myVowels = middleWord.replace(/[^aeiou]{1}/gi, \"\").split(\"\");\n\tvar newMiddle = [];\n\tvar myNewVowels = severeMiddle(myVowels.join(\"\")).split(\"\");\n\n\tfor(var i = 0; i < letters.length; i++) {\n\t\tif(isVowel(letters[i])) {\n\t\t\tnewMiddle.push(letters[i].toLowerCase() === letters[i] ? myVowels.pop().toLowerCase() : myVowels.pop().toUpperCase());\n\t\t} else {\n\t\t\tnewMiddle.push(letters[i]);\n\t\t}\n\t}\n\treturn newMiddle.join(\"\");\n}\n\nfunction getNewWord(word, fnSeverity) {\n\tif(word.length <= 3)\n\t\treturn word;\n\tvar letters = word.split(\"\");\n\tvar firstLetter = letters.shift();\n\tvar lastLetter = letters.pop();\n\treturn firstLetter + fnSeverity(letters.join(\"\")) + lastLetter;\n}\n\nfunction getNewSentence(original) {\n\tvar originalWords = original.split(/[\\s,\\.\\(\\)\\[\\]\\'\\-\\:\\;\\#\\&\\^\\%\\$\\£\\\"\\!\\/\\\\\\+\\=]+/);\n\tvar originalSeparators = original.replace(/[^\\s,\\.\\(\\)\\[\\]\\'\\-\\:\\;\\#\\&\\^\\%\\$\\£\\\"\\!\\/\\\\\\+\\=]{1,}/g, \"~\").split(\"~\");\n\toriginalSeparators.shift();\n\tvar newWords = \"\";\n\n\tfor(var i = 0; i < originalWords.length; i++) {\n\t\tnewWords += jumbledWords.add(originalWords[i], getNewWord);\n\t\tnewWords += original.length === newWords.length ? \"\" : originalSeparators.shift();\n\t}\n\treturn newWords;\n}\n\nfunction getNewText(original) {\n\tvar originalSentences = original.split(/\\n/);\n\tvar returnString = \"\";\n\tfor(var i = 0; i < originalSentences.length; i++) {\n\t\treturnString += \"<p>\" + getNewSentence(originalSentences[i]) + \"</p>\";\n\t}\n\treturn returnString;\n}\n\nvar FALLINGLETTERS = 30;\nfunction init() {\n\tvar first = true;\n\tfor(var i = 0; i < FALLINGLETTERS; i++) {\n\t\tdocument.body.appendChild(createAFallingLetter(first));\n\t\tfirst = false;\n\t}\n}\n\nfunction randomInteger(low, high) {\n\treturn low + Math.floor(Math.random() * (high - low));\n}\n\nfunction randomFloat(low, high) {\n\treturn low + Math.random() * (high - low);\n}\n\nfunction randomItem(items) {\n\treturn items[randomInteger(0, items.length - 1)];\n}\n\nfunction durationValue(value) {\n\treturn value + \"s\";\n}\n\nfunction createAFallingLetter(is_first) {\n\tvar letters = \"dyslexiarize.me\".split(\"\");\n\tvar distances = [\"really-far-away\", \"far-away\", \"normal\", \"close\", \"really-close\"];\n\n\t/* Start by creating a wrapper div, and an empty span  */\n\tvar fallingLetterElement = document.createElement('div');\n\tfallingLetterElement.className = 'falling-letter ' + randomItem(distances);\n\n\tvar fallingLetter = document.createElement('span');\n\tfallingLetter.innerHTML = randomItem(letters);\n\n\tfallingLetterElement.appendChild(fallingLetter);\n\n\t/* Randomly choose a spin animation */\n\tvar spinAnimationName = 'spin';\n\n\t/* Randomly choose a side to anchor to, keeps the middle more dense and fits liquid layout */\n\tvar anchorSide = (Math.random() < 0.5) ? 'left' : 'right';\n\n\t/* Figure out a random duration for the fade and drop animations */\n\tvar fadeAndDropDuration = durationValue(randomFloat(5, 11));\n\n\t/* Figure out another random duration for the spin animation */\n\tvar spinDuration = durationValue(randomFloat(4, 8));\n\n\t// how long to wait before the flakes arrive\n\tvar fallingLetterDelay = is_first ? 0 : durationValue(randomFloat(0, 10));\n\n\tfallingLetterElement.style.webkitAnimationName = 'fade, drop';\n\tfallingLetterElement.style.webkitAnimationDuration = fadeAndDropDuration + ', ' + fadeAndDropDuration;\n\tfallingLetterElement.style.webkitAnimationDelay = fallingLetterDelay;\n\n\t/* Position the snowflake at a random location along the screen, anchored to either the left or the right*/\n\tfallingLetterElement.style[anchorSide] = randomInteger(10, 60) + '%';\n\n\tfallingLetter.style.webkitAnimationName = spinAnimationName;\n\tfallingLetter.style.webkitAnimationDuration = spinDuration;\n\n\t/* Return this snowflake element so it can be added to the document */\n\treturn fallingLetterElement;\n}\n\n"]],"start1":0,"start2":0,"length1":0,"length2":5659}]],"length":5659}
